name: Post Article to Dev.to

on:
  push:
    branches:
      - main

jobs:
  post-article:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Post article to Dev.to
      run: |
        curl -X POST -H "Content-Type: application/json" \
            -H "api-key: ${{ secrets.DEV_TO_API_KEY }}" \
            -d '{"article":{"title":"Title","body_markdown":"Body","published":false,"tags":["discuss", "javascript"]}}' \
            https://dev.to/api/articles
      env:
        DEVTO_API_KEY: ${{ secrets.DEV_TO_API_KEY }}
